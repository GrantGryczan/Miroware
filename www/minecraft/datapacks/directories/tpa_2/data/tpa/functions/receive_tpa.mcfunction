execute as @a[tag=tpa.sender] if score @s tpa.target matches 1.. run function tpa:cancel_tpa
scoreboard players operation @a[tag=tpa.sender] tpa.target = @a[tag=tpa.sender] tpa
tellraw @a[tag=tpa.sender] [{"text":"You have requested to teleport to ","color":"COLOR_1"},{"selector":"@s","color":"COLOR_2"},{"text":".\nTo cancel, ","color":"COLOR_1"},{"text":"enter","color":"COLOR_3"},{"text":" or ","color":"COLOR_1"},{"text":"click","color":"COLOR_3"},{"text":" on ","color":"COLOR_1"},{"text":"/trigger tpcancel","color":"COLOR_2","clickEvent":{"action":"run_command","value":"/trigger tpcancel"},"hoverEvent":{"action":"show_text","contents":[{"text":"Click to run ","color":"COLOR_1"},{"text":"/trigger tpcancel","color":"COLOR_2"},{"text":".","color":"COLOR_1"}]}},{"text":".","color":"COLOR_1"}]
tellraw @s ["",{"selector":"@a[tag=tpa.sender]","color":"COLOR_2"},{"text":" has requested to teleport to you.\nTo accept, ","color":"COLOR_1"},{"text":"enter","color":"COLOR_3"},{"text":" or ","color":"COLOR_1"},{"text":"click","color":"COLOR_3"},{"text":" on ","color":"COLOR_1"},{"text":"/trigger tpaccept","color":"COLOR_2","clickEvent":{"action":"run_command","value":"/trigger tpaccept"},"hoverEvent":{"action":"show_text","contents":[{"text":"Click to run ","color":"COLOR_1"},{"text":"/trigger tpaccept","color":"COLOR_2"},{"text":".\nThe ","color":"COLOR_1"},{"text":"most recent","color":"red"},{"text":" active teleport request will be accepted.\nEnter ","color":"COLOR_1"},{"text":"/trigger tpaccept set <PID>","color":"COLOR_2"},{"text":" instead if this player's request is not the most recent.","color":"COLOR_1"}]}},{"text":".\nTo deny, ","color":"COLOR_1"},{"text":"enter","color":"COLOR_3"},{"text":" or ","color":"COLOR_1"},{"text":"click","color":"COLOR_3"},{"text":" on ","color":"COLOR_1"},{"text":"/trigger tpdeny","color":"COLOR_2","clickEvent":{"action":"run_command","value":"/trigger tpdeny"},"hoverEvent":{"action":"show_text","contents":[{"text":"Click to run ","color":"COLOR_1"},{"text":"/trigger tpdeny","color":"COLOR_2"},{"text":".\nThe ","color":"COLOR_1"},{"text":"most recent","color":"red"},{"text":" active teleport request will be denied.\nEnter ","color":"COLOR_1"},{"text":"/trigger tpdeny set <PID>","color":"COLOR_2"},{"text":" instead if this player's request is not the most recent.","color":"COLOR_1"}]}},{"text":".","color":"COLOR_1"}]