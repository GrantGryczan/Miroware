[
  [
    "lastUpdate",
    "Thu Oct 29 2020 04:39:24 GMT-0400 (Eastern Daylight Time)"
  ],
  [
    "INTERNAL/VIRTUAL_FILE_SYSTEM",
    {
      "src\\graves.mc": {
        "data\\graves\\functions\\load_hitbox.mcfunction": "execute store result score @s graves.id run data get entity @s HandItems[1].tag.gravesData.id\ndata modify entity @s ArmorItems[0] set from entity @s HandItems[1]\ndata modify entity @s ArmorItems[1] set from entity @s HandItems[1]\ndata modify entity @s ArmorItems[2] set from entity @s HandItems[1]\ndata modify entity @s ArmorItems[3] set from entity @s HandItems[1]",
        "data\\graves\\functions\\load.mcfunction": "scoreboard objectives add graves.config dummy \"Graves Config\"\nscoreboard objectives add graves.deaths deathCount\nscoreboard objectives add graves.id dummy\nscoreboard objectives add graves.dummy dummy\nscoreboard objectives add graves.age dummy\nscoreboard objectives add grave trigger \"Locate Last Grave\"\nexecute unless score #robbing graves.config matches 0..1 run scoreboard players set #robbing graves.config 0\nexecute unless score #xp graves.config matches 0..1 run scoreboard players set #xp graves.config 1\nexecute unless score #locating graves.config matches 0..1 run scoreboard players set #locating graves.config 1\nexecute unless score #despawn graves.config matches 0.. run scoreboard players set #despawn graves.config 0\nscoreboard players set #pointsPerLevel graves.dummy 7\nscoreboard players set #prevOverworldDoImmediateRespawn graves.dummy 0\nscoreboard players set #prevNetherDoImmediateRespawn graves.dummy 0\nscoreboard players set #prevEndDoImmediateRespawn graves.dummy 0\nexecute in minecraft:overworld run gamerule keepInventory true\nexecute in minecraft:the_nether run gamerule keepInventory false\nexecute in minecraft:overworld store result score #dimGameRules graves.dummy run gamerule keepInventory\nexecute in minecraft:the_nether run gamerule keepInventory true\nexecute in minecraft:the_end run gamerule keepInventory true\nscoreboard players reset * graves.deaths\nexecute as @e[type=minecraft:armor_stand,tag=graves.hitbox] run function graves:load_hitbox\nexecute as @e[type=minecraft:armor_stand,tag=graves.model] store result score @s graves.id run data get entity @s ArmorItems[3].tag.gravesData.id",
        "data\\graves\\functions\\uninstall.mcfunction": "schedule clear graves:tick\nschedule clear graves:schedule\nschedule clear graves:update_model\nscoreboard objectives remove graves.config\nscoreboard objectives remove graves.deaths\nscoreboard objectives remove graves.id\nscoreboard objectives remove graves.dummy\nscoreboard objectives remove grave\ndata remove storage graves:storage players\ndata remove storage graves:storage lastGrave\ndata remove storage graves:storage temp",
        "data\\graves\\functions\\drop_inventory.mcfunction": "execute store result score #xp graves.dummy run data get entity @s XpLevel\nscoreboard players operation #xp graves.dummy *= #pointsPerLevel graves.dummy\nexecute if score #xp graves.dummy matches 101.. run scoreboard players set #xp graves.dummy 100\nexecute unless score #xp graves.config matches 1 if score #xp graves.dummy matches 1.. run function graves:drop_xp\nexecute if data entity @s Inventory[0] align xyz run function graves:create_grave\nexecute if score #xp graves.config matches 1 if score #xp graves.dummy matches 1.. align xyz run function graves:create_grave\nxp set @s 0 levels\nxp set @s 0 points",
        "data\\graves\\functions\\death.mcfunction": "execute at @s[gamemode=!spectator] run function graves:drop_inventory\nscoreboard players reset @s graves.deaths",
        "data\\graves\\functions\\check_hitbox.mcfunction": "execute store result score @s graves.id run data get entity @s HandItems[1].tag.gravesData.id\nexecute if score @s graves.id = #activated graves.dummy run tag @s add graves.activated",
        "data\\graves\\functions\\check_uuid_least.mcfunction": "data modify storage graves:storage temp set from entity @s UUIDLeast\nexecute store success score #success graves.dummy run data modify storage graves:storage temp set from entity @e[type=minecraft:armor_stand,tag=graves.activated,limit=1] HandItems[1].tag.gravesData.uuidLeast",
        "data\\graves\\functions\\fail_robbing.mcfunction": "tellraw @s {\"text\":\"Grave robbing is disabled.\",\"color\":\"red\"}\nscoreboard players set #failed graves.dummy 1",
        "data\\graves\\functions\\check_owner.mcfunction": "data modify storage graves:storage temp set from entity @s UUIDMost\nexecute store success score #success graves.dummy run data modify storage graves:storage temp set from entity @e[type=minecraft:armor_stand,tag=graves.activated,limit=1] HandItems[1].tag.gravesData.uuidMost\nexecute if score #success graves.dummy matches 0 run function graves:check_uuid_least\nexecute if score #success graves.dummy matches 1 run function graves:fail_robbing",
        "data\\graves\\functions\\fix_equipment\\drop_0.mcfunction": "summon minecraft:item ~ ~ ~ {Tags:[\"graves.item\"],Item:{id:\"minecraft:stone_button\",Count:1b}}\ndata modify entity @e[type=minecraft:item,tag=graves.item,limit=1] Item set from entity @s ArmorItems[0]\nexecute as @a[tag=graves.subject] run function graves:set_owner\ntag @e[type=minecraft:item] remove graves.item",
        "data\\graves\\functions\\fix_equipment\\check_0.mcfunction": "execute if entity @a[tag=graves.subject,gamemode=creative] run function graves:fix_equipment/drop_0\nexecute unless entity @a[tag=graves.subject,gamemode=creative] unless data entity @s ArmorItems[0].tag.gravesKey run function graves:fix_equipment/drop_0",
        "data\\graves\\functions\\fix_equipment\\drop_1.mcfunction": "summon minecraft:item ~ ~ ~ {Tags:[\"graves.item\"],Item:{id:\"minecraft:stone_button\",Count:1b}}\ndata modify entity @e[type=minecraft:item,tag=graves.item,limit=1] Item set from entity @s ArmorItems[1]\nexecute as @a[tag=graves.subject] run function graves:set_owner\ntag @e[type=minecraft:item] remove graves.item",
        "data\\graves\\functions\\fix_equipment\\check_1.mcfunction": "execute if entity @a[tag=graves.subject,gamemode=creative] run function graves:fix_equipment/drop_1\nexecute unless entity @a[tag=graves.subject,gamemode=creative] unless data entity @s ArmorItems[1].tag.gravesKey run function graves:fix_equipment/drop_1",
        "data\\graves\\functions\\fix_equipment\\drop_2.mcfunction": "summon minecraft:item ~ ~ ~ {Tags:[\"graves.item\"],Item:{id:\"minecraft:stone_button\",Count:1b}}\ndata modify entity @e[type=minecraft:item,tag=graves.item,limit=1] Item set from entity @s ArmorItems[2]\nexecute as @a[tag=graves.subject] run function graves:set_owner\ntag @e[type=minecraft:item] remove graves.item",
        "data\\graves\\functions\\fix_equipment\\check_2.mcfunction": "execute if entity @a[tag=graves.subject,gamemode=creative] run function graves:fix_equipment/drop_2\nexecute unless entity @a[tag=graves.subject,gamemode=creative] unless data entity @s ArmorItems[2].tag.gravesKey run function graves:fix_equipment/drop_2",
        "data\\graves\\functions\\fix_equipment\\drop_3.mcfunction": "summon minecraft:item ~ ~ ~ {Tags:[\"graves.item\"],Item:{id:\"minecraft:stone_button\",Count:1b}}\ndata modify entity @e[type=minecraft:item,tag=graves.item,limit=1] Item set from entity @s ArmorItems[3]\nexecute as @a[tag=graves.subject] run function graves:set_owner\ntag @e[type=minecraft:item] remove graves.item",
        "data\\graves\\functions\\fix_equipment\\check_3.mcfunction": "execute if entity @a[tag=graves.subject,gamemode=creative] run function graves:fix_equipment/drop_3\nexecute unless entity @a[tag=graves.subject,gamemode=creative] unless data entity @s ArmorItems[3].tag.gravesKey run function graves:fix_equipment/drop_3",
        "data\\graves\\functions\\fix_equipment\\all.mcfunction": "execute store result score #count graves.dummy run data get entity @s ArmorItems[0].Count\nexecute if score #count graves.dummy matches 1 run function graves:fix_equipment/check_0\nexecute unless score #count graves.dummy matches 2 run data modify entity @s ArmorItems[0] set from entity @s HandItems[1]\nexecute store result score #count graves.dummy run data get entity @s ArmorItems[1].Count\nexecute if score #count graves.dummy matches 1 run function graves:fix_equipment/check_1\nexecute unless score #count graves.dummy matches 2 run data modify entity @s ArmorItems[1] set from entity @s HandItems[1]\nexecute store result score #count graves.dummy run data get entity @s ArmorItems[2].Count\nexecute if score #count graves.dummy matches 1 run function graves:fix_equipment/check_2\nexecute unless score #count graves.dummy matches 2 run data modify entity @s ArmorItems[2] set from entity @s HandItems[1]\nexecute store result score #count graves.dummy run data get entity @s ArmorItems[3].Count\nexecute if score #count graves.dummy matches 1 run function graves:fix_equipment/check_3\nexecute unless score #count graves.dummy matches 2 run data modify entity @s ArmorItems[3] set from entity @s HandItems[1]\nexecute if score #failed graves.dummy matches 1 run tag @s remove graves.activated\nscoreboard players set #failed graves.dummy 0",
        "data\\graves\\functions\\kill_model.mcfunction": "execute store result score @s graves.id run data get entity @s ArmorItems[3].tag.gravesData.id\nexecute if score @s graves.id = #activated graves.dummy run kill @s",
        "data\\graves\\functions\\drop_item.mcfunction": "summon minecraft:item ~ ~0.2 ~ {Tags:[\"graves.item\"],Item:{id:\"minecraft:bone\",Count:1b}}\ndata modify entity @e[type=minecraft:item,tag=graves.item,limit=1] Item set from entity @s HandItems[0].tag.gravesData.items[0]\nexecute as @a[tag=graves.subject,predicate=graves:sneaking,limit=1] run function graves:set_owner\ntag @e[type=minecraft:item,tag=graves.item] remove graves.item\ndata remove entity @s HandItems[0].tag.gravesData.items[0]\nscoreboard players remove #remaining graves.dummy 1\nexecute if score #remaining graves.dummy matches 1.. run function graves:drop_item",
        "data\\graves\\functions\\read_xp.mcfunction": "execute store result score #xp graves.dummy run data get entity @s HandItems[0].tag.gravesData.xp\nfunction graves:drop_xp",
        "data\\graves\\functions\\open_grave.mcfunction": "execute store result score #remaining graves.dummy run data get storage graves:storage players\ndata modify storage graves:storage temp set from entity @s HandItems[1].tag.gravesData.uuidMost\nexecute store success score #success graves.dummy run data modify storage graves:storage temp set from storage graves:storage players[-1].uuidMost\nexecute if score #success graves.dummy matches 0 run function graves:check_uuid_least_as_grave\nexecute if score #success graves.dummy matches 1 run function graves:rotate/player_as_grave\nscoreboard players set #rotated graves.dummy 0\nfunction graves:rotate/graves\ndata remove storage graves:storage players[-1].graves[-1]\nscoreboard players remove #remaining graves.dummy 1\nexecute unless score #rotated graves.dummy matches 0 unless score #remaining graves.dummy matches 0 run function graves:rotate/back_grave\nexecute as @e[type=minecraft:armor_stand,tag=graves.model] run function graves:kill_model\nexecute store result score #remaining graves.dummy run data get entity @s HandItems[0].tag.gravesData.items\nexecute if score #remaining graves.dummy matches 1.. run function graves:drop_item\nexecute if entity @s[tag=graves.hasXP] run function graves:read_xp\nplaysound minecraft:block.stone.break block @a\nparticle minecraft:poof ~ ~0.7 ~ 0 0 0 0.05 10\nkill @s",
        "data\\graves\\functions\\activate_grave.mcfunction": "tag @s add graves.subject\nexecute store result score #activated graves.dummy run data get entity @s SelectedItem.tag.gravesData.id\nexecute as @e[type=minecraft:armor_stand,tag=graves.hitbox] run function graves:check_hitbox\nexecute if score #robbing graves.config matches 0 unless data entity @e[type=minecraft:armor_stand,tag=graves.activated,limit=1] ArmorItems[{tag:{gravesKey:1b}}] run function graves:check_owner\nexecute as @e[type=minecraft:armor_stand,tag=graves.activated] run function graves:fix_equipment/all\nexecute as @e[type=minecraft:armor_stand,tag=graves.activated] at @s run function graves:open_grave\nclear @s minecraft:stone_button{gravesData:{}}\ntag @s remove graves.subject",
        "data\\graves\\functions\\create_name.mcfunction": "summon minecraft:area_effect_cloud ~0.5 ~ ~0.5 {Tags:[\"graves.name\"],CustomNameVisible:1b,Duration:2}\ndata modify entity @e[dx=0,dy=0,dz=0,type=minecraft:area_effect_cloud,tag=graves.name,limit=1] CustomName set from entity @s CustomName",
        "data\\graves\\functions\\show_name.mcfunction": "execute unless entity @e[dx=0,dy=0,dz=0,type=minecraft:area_effect_cloud,tag=graves.name,limit=1] run function graves:create_name\ndata modify entity @e[dx=0,dy=0,dz=0,type=minecraft:area_effect_cloud,tag=graves.name,limit=1] Age set value 0",
        "data\\graves\\functions\\locate_grave.mcfunction": "function graves:rotate/players\nexecute store success score #success graves.dummy if data storage graves:storage players[-1].graves[-1]\nexecute if score #success graves.dummy matches 1 run function graves:display_grave_location\nexecute unless score #success graves.dummy matches 1 run tellraw @s {\"text\":\"You do not have a last grave.\",\"color\":\"red\"}",
        "data\\graves\\functions\\trigger_grave.mcfunction": "execute if score #locating graves.config matches 0 run tellraw @s {\"text\":\"Grave locating is disabled.\",\"color\":\"red\"}\nexecute if score #locating graves.config matches 1 run function graves:locate_grave\nscoreboard players set @a grave 0",
        "data\\graves\\functions\\tick.mcfunction": "schedule function graves:tick 1t\nexecute as @a[scores={graves.deaths=1..}] run function graves:death\nexecute as @a[predicate=graves:interacted_with_grave] at @s run function graves:activate_grave\nexecute as @e[type=minecraft:armor_stand,tag=graves.hitbox] at @s if entity @a[gamemode=!spectator,distance=..2] align xz run function graves:show_name\nscoreboard players enable @a grave\nexecute as @a[scores={grave=1}] run function graves:trigger_grave",
        "data\\graves\\functions\\despawn_grave.mcfunction": "execute store result score #remaining graves.dummy run data get storage graves:storage players\ndata modify storage graves:storage temp set from entity @s HandItems[1].tag.gravesData.uuidMost\nexecute store success score #success graves.dummy run data modify storage graves:storage temp set from storage graves:storage players[-1].uuidMost\nexecute if score #success graves.dummy matches 0 run function graves:check_uuid_least_as_grave\nexecute if score #success graves.dummy matches 1 run function graves:rotate/player_as_grave\nscoreboard players set #rotated graves.dummy 0\nfunction graves:rotate/graves\ndata remove storage graves:storage players[-1].graves[-1]\nscoreboard players remove #remaining graves.dummy 1\nexecute unless score #rotated graves.dummy matches 0 unless score #remaining graves.dummy matches 0 run function graves:rotate/back_grave\nexecute store result score #activated graves.dummy run data get entity @s HandItems[1].tag.gravesData.id\nexecute as @e[type=minecraft:armor_stand,tag=graves.model] run function graves:kill_model\nplaysound minecraft:block.stone.break block @a\nparticle minecraft:poof ~ ~0.7 ~ 0 0 0 0.05 10\nkill @s",
        "data\\graves\\functions\\age_grave.mcfunction": "scoreboard players add @s graves.age 1\nexecute if score @s graves.age > #despawn graves.config at @s run function graves:despawn_grave",
        "data\\graves\\functions\\age_graves.mcfunction": "schedule function graves:age_graves 1s\nexecute unless score #despawn graves.config matches 0 as @e[type=minecraft:armor_stand,tag=graves.hitbox] run function graves:age_grave",
        "data\\graves\\functions\\fix_hitbox_position.mcfunction": "scoreboard players operation #id graves.dummy = @s graves.id\nexecute as @e[type=minecraft:armor_stand,tag=graves.hitbox,distance=..0.01] unless score @s graves.id = #id graves.dummy as @e[type=minecraft:armor_stand,tag=graves.hitbox,distance=0.01..] if score @s graves.id = #id graves.dummy run tp @s ~ ~ ~\nexecute unless entity @e[type=minecraft:armor_stand,tag=graves.hitbox,distance=..0.01] as @e[type=minecraft:armor_stand,tag=graves.hitbox,distance=0.01..] if score @s graves.id = #id graves.dummy run tp @s ~ ~ ~",
        "data\\graves\\functions\\check_dimensional_game_rules.mcfunction": "execute in minecraft:the_nether store result score #keepInventory graves.dummy run gamerule keepInventory\nexecute if score #keepInventory graves.dummy matches 0 if score #prevNetherKeepInventory graves.dummy matches 1 run tellraw @a {\"text\":\"The Graves data pack cannot read player inventories correctly unless gamerule keepInventory is true.\",\"color\":\"red\"}\nscoreboard players operation #prevNetherKeepInventory graves.dummy = #keepInventory graves.dummy\nexecute in minecraft:the_end store result score #keepInventory graves.dummy run gamerule keepInventory\nexecute if score #keepInventory graves.dummy matches 0 if score #prevEndKeepInventory graves.dummy matches 1 run tellraw @a {\"text\":\"The Graves data pack cannot read player inventories correctly unless gamerule keepInventory is true.\",\"color\":\"red\"}\nscoreboard players operation #prevEndKeepInventory graves.dummy = #keepInventory graves.dummy\nexecute in minecraft:the_nether store result score #doImmediateRespawn graves.dummy run gamerule doImmediateRespawn\nexecute if score #doImmediateRespawn graves.dummy matches 1 if score #prevNetherDoImmediateRespawn graves.dummy matches 0 run tellraw @a {\"text\":\"The Graves data pack cannot position graves correctly unless gamerule doImmediateRespawn is false.\",\"color\":\"red\"}\nscoreboard players operation #prevNetherDoImmediateRespawn graves.dummy = #doImmediateRespawn graves.dummy\nexecute in minecraft:the_end store result score #doImmediateRespawn graves.dummy run gamerule doImmediateRespawn\nexecute if score #doImmediateRespawn graves.dummy matches 1 if score #prevEndDoImmediateRespawn graves.dummy matches 0 run tellraw @a {\"text\":\"The Graves data pack cannot position graves correctly unless gamerule doImmediateRespawn is false.\",\"color\":\"red\"}\nscoreboard players operation #prevEndDoImmediateRespawn graves.dummy = #doImmediateRespawn graves.dummy",
        "data\\graves\\functions\\schedule.mcfunction": "schedule function graves:schedule 2s\nexecute as @e[type=minecraft:armor_stand,tag=graves.model] at @s positioned ~ ~1.375 ~ run function graves:fix_hitbox_position\nexecute in minecraft:overworld store result score #keepInventory graves.dummy run gamerule keepInventory\nexecute if score #keepInventory graves.dummy matches 0 if score #prevOverworldKeepInventory graves.dummy matches 1 run tellraw @a {\"text\":\"The Graves data pack cannot read player inventories correctly unless gamerule keepInventory is true.\",\"color\":\"red\"}\nscoreboard players operation #prevOverworldKeepInventory graves.dummy = #keepInventory graves.dummy\nexecute in minecraft:overworld store result score #doImmediateRespawn graves.dummy run gamerule doImmediateRespawn\nexecute if score #doImmediateRespawn graves.dummy matches 1 if score #prevOverworldDoImmediateRespawn graves.dummy matches 0 run tellraw @a {\"text\":\"The Graves data pack cannot position graves correctly unless gamerule doImmediateRespawn is false.\",\"color\":\"red\"}\nscoreboard players operation #prevOverworldDoImmediateRespawn graves.dummy = #doImmediateRespawn graves.dummy\nexecute if score #dimGameRules graves.dummy matches 1 run function graves:check_dimensional_game_rules",
        "data\\graves\\functions\\update_model.mcfunction": "schedule function graves:update_model 20s\nexecute as @e[type=minecraft:armor_stand,tag=graves.model] run data merge entity @s {Fire:32767s,Air:32767s}",
        "data\\graves\\functions\\check_uuid_least_as_grave.mcfunction": "data modify storage graves:storage temp set from entity @s HandItems[1].tag.gravesData.uuidLeast\nexecute store success score #success graves.dummy run data modify storage graves:storage temp set from storage graves:storage players[-1].uuidLeast",
        "data\\graves\\functions\\check_uuid_least_for_player_rotation.mcfunction": "data modify storage graves:storage temp set from entity @s UUIDLeast\nexecute store success score #success graves.dummy run data modify storage graves:storage temp set from storage graves:storage players[-1].uuidLeast",
        "data\\graves\\functions\\remove_vanishing_item.mcfunction": "execute store success score #success graves.dummy run data remove entity @s HandItems[0].tag.gravesData.items[{tag:{Enchantments:[{id:\"minecraft:vanishing_curse\"}]}}]\nexecute if score #success graves.dummy matches 1 run function graves:remove_vanishing_item",
        "data\\graves\\functions\\store_xp.mcfunction": "execute store result entity @s HandItems[0].tag.gravesData.xp short 1 run scoreboard players get #xp graves.dummy\ntag @s add graves.hasXP\nscoreboard players set #xp graves.dummy 0",
        "data\\graves\\functions\\offset_up.mcfunction": "tp @s ~ ~ ~\nexecute unless predicate graves:valid positioned ~ ~1 ~ run function graves:offset_up\nexecute if predicate graves:valid if entity @e[dx=0,dy=0,dz=0,type=minecraft:armor_stand,tag=!graves.new,nbt=!{Marker:1b}] positioned ~ ~1 ~ run function graves:offset_up",
        "data\\graves\\functions\\offset_down.mcfunction": "tp @s ~ ~ ~\nexecute unless entity @s[y=0,dy=0] positioned ~ ~-1 ~ if predicate graves:valid unless entity @e[dx=0,dy=0,dz=0,type=minecraft:armor_stand,tag=!graves.new,nbt=!{Marker:1b}] run function graves:offset_down\nexecute if entity @s[y=0,dy=0] at @e[type=minecraft:area_effect_cloud,tag=graves.start] run tp @s ~ ~ ~",
        "data\\graves\\functions\\prepare_model.mcfunction": "execute store result entity @s ArmorItems[3].tag.gravesData.id int 1 run scoreboard players get #id graves.dummy\nscoreboard players operation @s graves.id = #id graves.dummy\nexecute if entity @a[tag=graves.player,y_rotation=-45..45] run tp @s ~ ~ ~ ~90 ~\nexecute if entity @a[tag=graves.player,y_rotation=135..225] run tp @s ~ ~ ~ ~90 ~\ntp @s ~ ~-1.375 ~\ntag @s remove graves.new",
        "data\\graves\\functions\\create_model.mcfunction": "summon minecraft:armor_stand ~ ~ ~ {Tags:[\"graves.marker\",\"graves.model\",\"graves.new\"],Marker:1b,Invisible:1b,NoGravity:1b,Invulnerable:1b,ArmorItems:[{},{},{},{id:\"minecraft:stone_brick_wall\",Count:1b,tag:{gravesData:{}}}],Fire:32767s,Air:32767s}\nexecute as @e[type=minecraft:armor_stand,tag=graves.new] run function graves:prepare_model\nloot spawn ~ 1000 ~ loot graves:name_tag\ntag @e[type=minecraft:item,nbt={Item:{tag:{gravesNameTag:1b}}}] add graves.nameTag\ndata modify entity @s CustomName set from entity @e[type=minecraft:item,tag=graves.nameTag,limit=1] Item.tag.display.Name\nkill @e[type=minecraft:item,tag=graves.nameTag,limit=1]",
        "data\\graves\\functions\\prepare_grave.mcfunction": "function graves:remove_vanishing_item\nexecute if score #xp graves.config matches 1 if score #xp graves.dummy matches 1.. run function graves:store_xp\ndata modify entity @s HandItems[1].tag.gravesData.uuidMost set from entity @a[tag=graves.player,limit=1] UUIDMost\ndata modify entity @s HandItems[1].tag.gravesData.uuidLeast set from entity @a[tag=graves.player,limit=1] UUIDLeast\nexecute store result entity @s HandItems[1].tag.gravesData.id int 1 run scoreboard players get #id graves.dummy\nscoreboard players operation @s graves.id = #id graves.dummy\ndata modify entity @s ArmorItems[0] set from entity @s HandItems[1]\ndata modify entity @s ArmorItems[1] set from entity @s HandItems[1]\ndata modify entity @s ArmorItems[2] set from entity @s HandItems[1]\ndata modify entity @s ArmorItems[3] set from entity @s HandItems[1]\nexecute store result score #y graves.dummy run data get entity @s Pos[1]\nexecute if score #y graves.dummy matches ..0 run tp @s ~ 1 ~\nexecute at @s run summon minecraft:area_effect_cloud ~ ~ ~ {Tags:[\"graves.start\"]}\nexecute at @s run function graves:offset_up\nexecute at @s if predicate graves:valid unless entity @e[dx=0,dy=0,dz=0,type=minecraft:armor_stand,tag=!graves.new,nbt=!{Marker:1b}] run function graves:offset_down\nkill @e[type=minecraft:area_effect_cloud,tag=graves.start]\nexecute at @s positioned ~ ~-1 ~ if predicate graves:valid unless entity @e[dx=0,dy=0,dz=0,type=minecraft:armor_stand,tag=!graves.new,nbt=!{Marker:1b}] run setblock ~ ~ ~ minecraft:grass_block\ntag @s remove graves.new\nexecute at @s run tp @s ~0.5 ~ ~0.5\nexecute store result storage graves:storage players[-1].graves[-1].x int 1 run data get entity @s Pos[0]\nexecute store result storage graves:storage players[-1].graves[-1].y int 1 run data get entity @s Pos[1]\nexecute store result storage graves:storage players[-1].graves[-1].z int 1 run data get entity @s Pos[2]\nexecute at @s run function graves:create_model\nexecute if score #locating graves.config matches 1 as @a[tag=graves.player] run function graves:display_grave_location",
        "data\\graves\\functions\\create_grave.mcfunction": "tag @s add graves.player\nfunction graves:rotate/players\nexecute store result score #id graves.dummy run data get storage graves:storage lastGrave\ndata modify storage graves:storage players[-1].graves append value {}\nexecute store result storage graves:storage players[-1].graves[-1].id int 1 run scoreboard players add #id graves.dummy 1\ndata modify storage graves:storage players[-1].graves[-1].dim set from entity @s Dimension\nexecute store result storage graves:storage lastGrave int 1 run scoreboard players get #id graves.dummy\nsummon minecraft:armor_stand ~ ~ ~ {Tags:[\"graves.marker\",\"graves.hitbox\",\"graves.new\"],Invisible:1b,NoGravity:1b,Invulnerable:1b,Small:1b,DisabledSlots:256,HandItems:[{id:\"minecraft:stone_button\",Count:1b,tag:{gravesData:{items:[]}}},{id:\"minecraft:stone_button\",Count:2b,tag:{gravesData:{}}}],Pose:{RightArm:[0.0f,-90.0f,0.0f],LeftArm:[0.0f,90.0f,0.0f],Head:[180.0f,0.0f,0.0f]},Silent:1b}\ndata modify entity @e[type=minecraft:armor_stand,tag=graves.new,limit=1] HandItems[0].tag.gravesData.items set from entity @s Inventory\nreplaceitem entity @s hotbar.0 minecraft:air\nreplaceitem entity @s hotbar.1 minecraft:air\nreplaceitem entity @s hotbar.2 minecraft:air\nreplaceitem entity @s hotbar.3 minecraft:air\nreplaceitem entity @s hotbar.4 minecraft:air\nreplaceitem entity @s hotbar.5 minecraft:air\nreplaceitem entity @s hotbar.6 minecraft:air\nreplaceitem entity @s hotbar.7 minecraft:air\nreplaceitem entity @s hotbar.8 minecraft:air\nreplaceitem entity @s weapon.offhand minecraft:air\nreplaceitem entity @s inventory.0 minecraft:air\nreplaceitem entity @s inventory.1 minecraft:air\nreplaceitem entity @s inventory.2 minecraft:air\nreplaceitem entity @s inventory.3 minecraft:air\nreplaceitem entity @s inventory.4 minecraft:air\nreplaceitem entity @s inventory.5 minecraft:air\nreplaceitem entity @s inventory.6 minecraft:air\nreplaceitem entity @s inventory.7 minecraft:air\nreplaceitem entity @s inventory.8 minecraft:air\nreplaceitem entity @s inventory.9 minecraft:air\nreplaceitem entity @s inventory.10 minecraft:air\nreplaceitem entity @s inventory.11 minecraft:air\nreplaceitem entity @s inventory.12 minecraft:air\nreplaceitem entity @s inventory.13 minecraft:air\nreplaceitem entity @s inventory.14 minecraft:air\nreplaceitem entity @s inventory.15 minecraft:air\nreplaceitem entity @s inventory.16 minecraft:air\nreplaceitem entity @s inventory.17 minecraft:air\nreplaceitem entity @s inventory.18 minecraft:air\nreplaceitem entity @s inventory.19 minecraft:air\nreplaceitem entity @s inventory.20 minecraft:air\nreplaceitem entity @s inventory.21 minecraft:air\nreplaceitem entity @s inventory.22 minecraft:air\nreplaceitem entity @s inventory.23 minecraft:air\nreplaceitem entity @s inventory.24 minecraft:air\nreplaceitem entity @s inventory.25 minecraft:air\nreplaceitem entity @s inventory.26 minecraft:air\nreplaceitem entity @s armor.feet minecraft:air\nreplaceitem entity @s armor.legs minecraft:air\nreplaceitem entity @s armor.chest minecraft:air\nreplaceitem entity @s armor.head minecraft:air\nexecute as @e[type=minecraft:armor_stand,tag=graves.new] run function graves:prepare_grave\ntag @s remove graves.player",
        "data\\graves\\functions\\display_grave_location.mcfunction": "execute store result score #dimension graves.dummy run data get storage graves:storage players[-1].graves[-1].dim\nexecute if score #dimension graves.dummy matches 0 run tellraw @s [{\"text\":\"Your last grave is at \",\"color\":\"COLOR_1\"},{\"text\":\"(\",\"color\":\"COLOR_2\"},{\"storage\":\"graves:storage\",\"nbt\":\"players[-1].graves[-1].x\",\"color\":\"COLOR_2\"},{\"text\":\", \",\"color\":\"COLOR_2\"},{\"storage\":\"graves:storage\",\"nbt\":\"players[-1].graves[-1].y\",\"color\":\"COLOR_2\"},{\"text\":\", \",\"color\":\"COLOR_2\"},{\"storage\":\"graves:storage\",\"nbt\":\"players[-1].graves[-1].z\",\"color\":\"COLOR_2\"},{\"text\":\")\",\"color\":\"COLOR_2\"},{\"text\":\" in minecraft:overworld.\",\"color\":\"COLOR_1\"}]\nexecute if score #dimension graves.dummy matches -1 run tellraw @s [{\"text\":\"Your last grave is at \",\"color\":\"COLOR_1\"},{\"text\":\"(\",\"color\":\"COLOR_2\"},{\"storage\":\"graves:storage\",\"nbt\":\"players[-1].graves[-1].x\",\"color\":\"COLOR_2\"},{\"text\":\", \",\"color\":\"COLOR_2\"},{\"storage\":\"graves:storage\",\"nbt\":\"players[-1].graves[-1].y\",\"color\":\"COLOR_2\"},{\"text\":\", \",\"color\":\"COLOR_2\"},{\"storage\":\"graves:storage\",\"nbt\":\"players[-1].graves[-1].z\",\"color\":\"COLOR_2\"},{\"text\":\")\",\"color\":\"COLOR_2\"},{\"text\":\" in minecraft:the_nether.\",\"color\":\"COLOR_1\"}]\nexecute if score #dimension graves.dummy matches 1 run tellraw @s [{\"text\":\"Your last grave is at \",\"color\":\"COLOR_1\"},{\"text\":\"(\",\"color\":\"COLOR_2\"},{\"storage\":\"graves:storage\",\"nbt\":\"players[-1].graves[-1].x\",\"color\":\"COLOR_2\"},{\"text\":\", \",\"color\":\"COLOR_2\"},{\"storage\":\"graves:storage\",\"nbt\":\"players[-1].graves[-1].y\",\"color\":\"COLOR_2\"},{\"text\":\", \",\"color\":\"COLOR_2\"},{\"storage\":\"graves:storage\",\"nbt\":\"players[-1].graves[-1].z\",\"color\":\"COLOR_2\"},{\"text\":\")\",\"color\":\"COLOR_2\"},{\"text\":\" in minecraft:the_end.\",\"color\":\"COLOR_1\"}]\nexecute unless score #dimension graves.dummy matches -1..1 run tellraw @s [{\"text\":\"Your last grave is at \",\"color\":\"COLOR_1\"},{\"text\":\"(\",\"color\":\"COLOR_2\"},{\"storage\":\"graves:storage\",\"nbt\":\"players[-1].graves[-1].x\",\"color\":\"COLOR_2\"},{\"text\":\", \",\"color\":\"COLOR_2\"},{\"storage\":\"graves:storage\",\"nbt\":\"players[-1].graves[-1].y\",\"color\":\"COLOR_2\"},{\"text\":\", \",\"color\":\"COLOR_2\"},{\"storage\":\"graves:storage\",\"nbt\":\"players[-1].graves[-1].z\",\"color\":\"COLOR_2\"},{\"text\":\")\",\"color\":\"COLOR_2\"},{\"text\":\" in dimension \",\"color\":\"COLOR_1\"},{\"score\":{\"name\":\"#dimension\",\"objective\":\"graves.dummy\"}},{\"text\":\".\",\"color\":\"COLOR_1\"}]",
        "data\\graves\\functions\\drop_xp.mcfunction": "summon minecraft:experience_orb ~ ~0.2 ~ {Tags:[\"graves.xp\"]}\nexecute store result entity @e[type=minecraft:experience_orb,tag=graves.xp,limit=1] Value short 1 run scoreboard players get #xp graves.dummy\ntag @e[type=minecraft:experience_orb] remove graves.xp",
        "data\\graves\\functions\\set_owner.mcfunction": "data modify entity @e[type=minecraft:item,tag=graves.item,limit=1] Owner.L set from entity @s UUIDLeast\ndata modify entity @e[type=minecraft:item,tag=graves.item,limit=1] Owner.M set from entity @s UUIDMost",
        "data\\graves\\functions\\rotate\\add_player.mcfunction": "data modify storage graves:storage players append value {graves:[]}\ndata modify storage graves:storage players[-1].uuidMost set from entity @s UUIDMost\ndata modify storage graves:storage players[-1].uuidLeast set from entity @s UUIDLeast",
        "data\\graves\\functions\\rotate\\players.mcfunction": "execute store result score #remaining graves.dummy run data get storage graves:storage players\ndata modify storage graves:storage temp set from entity @s UUIDMost\nexecute store success score #success graves.dummy run data modify storage graves:storage temp set from storage graves:storage players[-1].uuidMost\nexecute if score #success graves.dummy matches 0 run function graves:check_uuid_least_for_player_rotation\nexecute unless score #remaining graves.dummy matches 0 if score #success graves.dummy matches 1 run function graves:rotate/player\nexecute if score #remaining graves.dummy matches 0 run function graves:rotate/add_player",
        "data\\graves\\functions\\rotate\\player.mcfunction": "data modify storage graves:storage players prepend from storage graves:storage players[-1]\ndata remove storage graves:storage players[-1]\nscoreboard players remove #remaining graves.dummy 1\ndata modify storage graves:storage temp set from entity @s UUIDMost\nexecute store success score #success graves.dummy run data modify storage graves:storage temp set from storage graves:storage players[-1].uuidMost\nexecute if score #success graves.dummy matches 0 run function graves:check_uuid_least_for_player_rotation\nexecute unless score #remaining graves.dummy matches 0 if score #success graves.dummy matches 1 run function graves:rotate/player",
        "data\\graves\\functions\\rotate\\player_as_grave.mcfunction": "data modify storage graves:storage players prepend from storage graves:storage players[-1]\ndata remove storage graves:storage players[-1]\nscoreboard players remove #remaining graves.dummy 1\ndata modify storage graves:storage temp set from entity @s HandItems[1].tag.gravesData.uuidMost\nexecute store success score #success graves.dummy run data modify storage graves:storage temp set from storage graves:storage players[-1].uuidMost\nexecute if score #success graves.dummy matches 0 run function graves:check_uuid_least_as_grave\nexecute unless score #remaining graves.dummy matches 0 if score #success graves.dummy matches 1 run function graves:rotate/player_as_grave",
        "data\\graves\\functions\\rotate\\graves.mcfunction": "execute store result score #remaining graves.dummy run data get storage graves:storage players[-1].graves\nexecute store result score #id graves.dummy run data get storage graves:storage players[-1].graves[-1].id\nexecute unless score #remaining graves.dummy matches 0 unless score #id graves.dummy = #activated graves.dummy run function graves:rotate/grave",
        "data\\graves\\functions\\rotate\\grave.mcfunction": "data modify storage graves:storage players[-1].graves prepend from storage graves:storage players[-1].graves[-1]\ndata remove storage graves:storage players[-1].graves[-1]\nscoreboard players add #rotated graves.dummy 1\nscoreboard players remove #remaining graves.dummy 1\nexecute store result score #id graves.dummy run data get storage graves:storage players[-1].graves[-1].id\nexecute unless score #remaining graves.dummy matches 0 unless score #id graves.dummy = #activated graves.dummy run function graves:rotate/grave",
        "data\\graves\\functions\\rotate\\back_grave.mcfunction": "data modify storage graves:storage players[-1].graves prepend from storage graves:storage players[-1].graves[-1]\ndata remove storage graves:storage players[-1].graves[-1]\nscoreboard players remove #remaining graves.dummy 1\nexecute unless score #remaining graves.dummy matches 0 run function graves:rotate/back_grave",
        "data\\graves\\functions\\restore_command_feedback.mcfunction": "gamerule sendCommandFeedback true",
        "data\\graves\\functions\\hide_command_feedback.mcfunction": "gamerule sendCommandFeedback false\nschedule function graves:restore_command_feedback 1t replace",
        "data\\graves\\functions\\config.mcfunction": "tellraw @s {\"text\":\"                                                                                \",\"color\":\"dark_gray\",\"strikethrough\":true}\ntellraw @s [\"                        Graves\",{\"text\":\" / \",\"color\":\"gray\"},\"Global Settings                        \"]\ntellraw @s {\"text\":\"                                                                                \",\"color\":\"dark_gray\",\"strikethrough\":true}\nexecute if score #robbing graves.config matches 1 run tellraw @s [\"\",{\"text\":\"[ ✔ ]\",\"color\":\"green\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/function graves:config/disable_robbing\"},\"hoverEvent\":{\"action\":\"show_text\",\"value\":[\"\",{\"text\":\"Click to disable \",\"color\":\"red\"},\"Grave Robbing\",{\"text\":\".\",\"color\":\"red\"},{\"text\":\"\\nWhen enabled, players can open graves they do not own.\",\"color\":\"gray\"},{\"text\":\"\\nDefault: Disabled\",\"color\":\"dark_gray\"}]}},\" Grave Robbing\"]\nexecute unless score #robbing graves.config matches 1 run tellraw @s [\"\",{\"text\":\"[ ❌ ]\",\"color\":\"red\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/function graves:config/enable_robbing\"},\"hoverEvent\":{\"action\":\"show_text\",\"value\":[\"\",{\"text\":\"Click to enable \",\"color\":\"green\"},\"Grave Robbing\",{\"text\":\".\",\"color\":\"green\"},{\"text\":\"\\nWhen enabled, players can open graves they do not own.\",\"color\":\"gray\"},{\"text\":\"\\nDefault: Disabled\",\"color\":\"dark_gray\"}]}},\" Grave Robbing\"]\nexecute if score #xp graves.config matches 1 run tellraw @s [\"\",{\"text\":\"[ ✔ ]\",\"color\":\"green\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/function graves:config/disable_xp\"},\"hoverEvent\":{\"action\":\"show_text\",\"value\":[\"\",{\"text\":\"Click to disable \",\"color\":\"red\"},\"XP Collection\",{\"text\":\".\",\"color\":\"red\"},{\"text\":\"\\nWhen enabled, graves collect XP dropped on death.\\nNote that players do not drop all their XP on death.\",\"color\":\"gray\"},{\"text\":\"\\nDefault: Enabled\",\"color\":\"dark_gray\"}]}},\" XP Collection\"]\nexecute unless score #xp graves.config matches 1 run tellraw @s [\"\",{\"text\":\"[ ❌ ]\",\"color\":\"red\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/function graves:config/enable_xp\"},\"hoverEvent\":{\"action\":\"show_text\",\"value\":[\"\",{\"text\":\"Click to enable \",\"color\":\"green\"},\"XP Collection\",{\"text\":\".\",\"color\":\"green\"},{\"text\":\"\\nWhen enabled, graves collect XP dropped on death.\\nNote that players do not drop all their XP on death.\",\"color\":\"gray\"},{\"text\":\"\\nDefault: Enabled\",\"color\":\"dark_gray\"}]}},\" XP Collection\"]\nexecute if score #locating graves.config matches 1 run tellraw @s [\"\",{\"text\":\"[ ✔ ]\",\"color\":\"green\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/function graves:config/disable_locating\"},\"hoverEvent\":{\"action\":\"show_text\",\"value\":[\"\",{\"text\":\"Click to disable \",\"color\":\"red\"},\"Grave Locating\",{\"text\":\".\",\"color\":\"red\"},{\"text\":\"\\nWhen enabled, players can see the coordinates of their last grave.\",\"color\":\"gray\"},{\"text\":\"\\nDefault: Enabled\",\"color\":\"dark_gray\"}]}},\" Grave Locating\"]\nexecute unless score #locating graves.config matches 1 run tellraw @s [\"\",{\"text\":\"[ ❌ ]\",\"color\":\"red\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/function graves:config/enable_locating\"},\"hoverEvent\":{\"action\":\"show_text\",\"value\":[\"\",{\"text\":\"Click to enable \",\"color\":\"green\"},\"Grave Locating\",{\"text\":\".\",\"color\":\"green\"},{\"text\":\"\\nWhen enabled, players can see the coordinates of their last grave.\",\"color\":\"gray\"},{\"text\":\"\\nDefault: Enabled\",\"color\":\"dark_gray\"}]}},\" Grave Locating\"]\ntellraw @s [\"\",{\"text\":\"[ ✎ ]\",\"color\":\"gray\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":\"/scoreboard players set #despawn graves.config \"},\"hoverEvent\":{\"action\":\"show_text\",\"value\":[\"\",{\"text\":\"Click to enter the number of seconds it takes for a grave to despawn after it is created.\\nEnter \",\"color\":\"gray\"},\"0\",{\"text\":\" to disable grave despawning.\\nItems normally take 300 seconds (5 minutes) to despawn.\",\"color\":\"gray\"},{\"text\":\"\\nAccepts: whole numbers 0+\\nDefault: 0\",\"color\":\"dark_gray\"}]}},\" Grave Despawn Time \",{\"text\":\"(Current: \",\"color\":\"gray\"},{\"score\":{\"name\":\"#despawn\",\"objective\":\"graves.config\"},\"color\":\"gray\"},{\"text\":\")\",\"color\":\"gray\"}]\ntellraw @s [\"\",{\"text\":\">> \",\"color\":\"gold\"},{\"text\":\"[ Receive Grave Key ]\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/function graves:give_grave_key\"},\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"Click to receive a grave key which can be used to forcibly open graves.\",\"color\":\"gray\"}}}]\ntellraw @s {\"text\":\"                                                                                \",\"color\":\"dark_gray\",\"strikethrough\":true}\nexecute store result score #sendCommandFeedback graves.config run gamerule sendCommandFeedback\nexecute if score #sendCommandFeedback graves.config matches 1 run function graves:hide_command_feedback",
        "data\\graves\\functions\\config\\enable_robbing.mcfunction": "scoreboard players set #robbing graves.config 1\nfunction graves:config",
        "data\\graves\\functions\\config\\disable_robbing.mcfunction": "scoreboard players set #robbing graves.config 0\nfunction graves:config",
        "data\\graves\\functions\\config\\enable_xp.mcfunction": "scoreboard players set #xp graves.config 1\nfunction graves:config",
        "data\\graves\\functions\\config\\disable_xp.mcfunction": "scoreboard players set #xp graves.config 0\nfunction graves:config",
        "data\\graves\\functions\\config\\enable_locating.mcfunction": "scoreboard players set #locating graves.config 1\nfunction graves:config",
        "data\\graves\\functions\\config\\disable_locating.mcfunction": "scoreboard players set #locating graves.config 0\nfunction graves:config",
        "data\\graves\\functions\\give_grave_key.mcfunction": "give @s minecraft:player_head{gravesKey:1b,display:{Name:'[\"\",{\"text\":\"Grave Key\",\"italic\":false,\"color\":\"yellow\"}]',Lore:['{\"text\":\"Right-click a grave while holding exactly one of this to forcibly open it.\",\"color\":\"gray\",\"italic\":false}','{\"text\":\"Placing this down will break its functionality.\",\"color\":\"gray\",\"italic\":false}']},SkullOwner:{Id:\"0-0-0-0-0\",Properties:{textures:[{Value:\"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMWVjNzA3NjllMzYzN2E3ZWRiNTcwMmJjYzQzM2NjMjQyYzJmMjIzNWNiNzNiOTQwODBmYjVmYWZmNDdiNzU0ZSJ9fX0=\"}]}}}",
        "data\\minecraft\\tags\\functions\\load.json": "{\"replace\":false,\"values\":[\"graves:load\",\"graves:tick\",\"graves:age_graves\",\"graves:schedule\",\"graves:update_model\"]}"
      }
    }
  ]
]